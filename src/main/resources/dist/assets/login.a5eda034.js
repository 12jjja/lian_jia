import{a as v,d6 as w,A as b,c as y,d7 as S,W as x,d8 as D,o as I,k as V,m as a,F as u,v as t,l as i,d9 as k,aR as A,da as N,db as T,H as F,D as q,I as J,J as K,z as R}from"./index.105925d8.js";import{E as U,b as $,c as z}from"./el-input.740a9b1b.js";import{S as H}from"./request.26eb4ff5.js";import{E as l}from"./index.ca3c5669.js";import"./event.19e4c5e3.js";import"./_commonjsHelpers.712cc82f.js";const c=d=>(J("data-v-1e4143da"),d=d(),K(),d),L={class:"login-wrap"},M={class:"ms-login"},O=c(()=>a("div",{class:"ms-title"},"\u7528\u6237\u767B\u5F55",-1)),P={class:"login-btn"},W=F("\u767B\u5F55"),j=c(()=>a("br",null,null,-1)),G=c(()=>a("br",null,null,-1)),Q=F("\u4ECE\u672A\u6CE8\u518C\u8FC7\u7684\u8D26\u6237\u5C06\u4F1A\u81EA\u52A8\u6CE8\u518C "),X=v({__name:"login",setup(d){const B=w(),e=b({username:"",password:""}),E=y({get(){return e.username===""||e.password===""},set(){}}),C={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},_=S(),m=x(),f=p=>{!p||p.validate(s=>{if(s){if(console.log("\u5408\u6CD5"),e.username===""||e.username.length>10)return l.error("\u7528\u6237\u540D\u9700\u8981\u5C0F\u4E8E10\u4E2A\u5B57\u7B26\u5E76\u4E14\u6700\u5C111\u4E2A\u5B57\u7B26"),!1;H.post("/login",{username:e.username,password:e.password}).then(o=>{if(o.data.code===1){l.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("ms_username",e.username);const r=_.defaultList[e.username=="admin"?"admin":"user"];_.handleSet(r),localStorage.setItem("ms_keys",JSON.stringify(r)),B.push("/")}else return l.error("\u8D26\u53F7\u6216\u5BC6\u7801\u9519\u8BEF"),!1},o=>(l.error("\u8BF7\u6C42\u5931\u8D25!",o),!1))}else return l.error("\u767B\u5F55\u5931\u8D25"),!1})};return D().clearTags(),(p,s)=>{const o=q,r=U,g=$,h=z;return I(),V("div",L,[a("div",M,[O,u(h,{model:e,rules:C,ref_key:"login",ref:m,"label-width":"0px",class:"ms-content"},{default:t(()=>[u(g,{prop:"username"},{default:t(()=>[u(r,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=n=>e.username=n),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prepend:t(()=>[u(o,{icon:i(k)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),u(g,{prop:"password"},{default:t(()=>[u(r,{type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=n=>e.password=n),onKeyup:s[2]||(s[2]=A(n=>f(m.value),["enter"]))},{prepend:t(()=>[u(o,{icon:i(N)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),a("div",P,[u(o,{type:"primary",onClick:s[3]||(s[3]=n=>f(m.value)),disabled:i(E)},{default:t(()=>[W]),_:1},8,["disabled"]),j,G,a("span",null,[u(i(T),{style:{width:"20px",height:"20px","margin-right":"10px",color:"brown"}}),Q])])]),_:1},8,["model"])])])}}});const ae=R(X,[["__scopeId","data-v-1e4143da"]]);export{ae as default};
