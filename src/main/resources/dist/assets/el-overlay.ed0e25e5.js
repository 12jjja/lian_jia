import{N as W,am as te,au as re,aC as ue,b6 as X,a5 as de,b7 as ce,u as P,b8 as fe,aq as F,Z as K,at as me,ap as pe,b9 as ve,ar as ye,ba as V,b as Z,d as G,a as J,F as R,r as T,as as be,aL as Ce,ai as Ee,R as Q,bb as Te,c as U,o as I,k as x,m as H,n as g,l as o,t as ge,v as M,s as q,x as he,E as we,q as j,p as Se,aJ as ke,_ as se,bc as Me,bd as Ae,U as De,ab as Le,a$ as ee,W as A,be as Ie,bf as Be,a1 as Ne,a0 as Oe,bg as oe,a2 as Re,bh as $e,a7 as Ye,a3 as _e,ax as He,aY as ze,aT as Ue,aK as We,bi as Ve,y as xe}from"./index.1155b2aa.js";import{U as ne}from"./event.19e4c5e3.js";let _;const Xe=e=>{var s;if(!W)return 0;if(_!==void 0)return _;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const d=l.offsetWidth;return(s=t.parentNode)==null||s.removeChild(t),_=n-d,_};function mo(e,s){if(!W)return;if(!s){e.scrollTop=0;return}const t=[];let n=s.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)t.push(n),n=n.offsetParent;const l=s.offsetTop+t.reduce((c,m)=>c+m.offsetTop,0),d=l+s.offsetHeight,i=e.scrollTop,r=i+e.clientHeight;l<i?e.scrollTop=l:d>r&&(e.scrollTop=d-e.clientHeight)}var z=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(z||{});const le=Symbol("dialogInjectionKey"),Ke=(e,s,t)=>{let n={offsetX:0,offsetY:0};const l=r=>{const c=r.clientX,m=r.clientY,{offsetX:p,offsetY:v}=n,a=e.value.getBoundingClientRect(),f=a.left,h=a.top,B=a.width,N=a.height,D=document.documentElement.clientWidth,O=document.documentElement.clientHeight,L=-f+p,w=-h+v,S=D-f-B+p,b=O-h-N+v,k=y=>{const C=Math.min(Math.max(p+y.clientX-c,L),S),$=Math.min(Math.max(v+y.clientY-m,w),b);n={offsetX:C,offsetY:$},e.value.style.transform=`translate(${X(C)}, ${X($)})`},u=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",u)},d=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",l)},i=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",l)};te(()=>{re(()=>{t.value?d():i()})}),ue(()=>{i()})},Ge=e=>{de(e)||ce("[useLockscreen]","You need to pass a ref param to this function");const s=P("popup"),t=fe(()=>s.bm("parent","hidden"));if(!W||F(document.body,t.value))return;let n=0,l=!1,d="0";const i=()=>{ye(document.body,t.value),l&&(document.body.style.width=d)};K(e,r=>{if(!r){i();return}l=!F(document.body,t.value),l&&(d=document.body.style.width),n=Xe(s.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,m=me(document.body,"overflowY");n>0&&(c||m==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),pe(document.body,t.value)}),ve(()=>i())},ae=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let s=!1,t=!1;return{onClick:i=>{s&&t&&e(i),s=t=!1},onMousedown:i=>{s=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},qe=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:G([String,Array,Object])},zIndex:{type:G([String,Number])}}),je={click:e=>e instanceof MouseEvent};var Pe=J({name:"ElOverlay",props:qe,emits:je,setup(e,{slots:s,emit:t}){const n=P("overlay"),l=c=>{t("click",c)},{onClick:d,onMousedown:i,onMouseup:r}=ae(e.customMaskEvent?void 0:l);return()=>e.mask?R("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:r},[T(s,"default")],z.STYLE|z.CLASS|z.PROPS,["onClick","onMouseup","onMousedown"]):be("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[T(s,"default")])}});const Ze=Pe,ie=Z({center:{type:Boolean,default:!1},closeIcon:{type:Ce,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Je={close:()=>!0},Fe=["aria-label"],Qe=["id"],eo={name:"ElDialogContent"},oo=J({...eo,props:ie,emits:Je,setup(e){const s=e,{t}=Ee(),{Close:n}=Me,{dialogRef:l,headerRef:d,bodyId:i,ns:r,style:c}=Q(le),{focusTrapRef:m}=Q(Te),p=Ae(m,l),v=U(()=>s.draggable);return Ke(l,d,v),(a,f)=>(I(),x("div",{ref:o(p),class:g([o(r).b(),o(r).is("fullscreen",a.fullscreen),o(r).is("draggable",o(v)),{[o(r).m("center")]:a.center},a.customClass]),style:Se(o(c)),tabindex:"-1",onClick:f[1]||(f[1]=ke(()=>{},["stop"]))},[H("header",{ref_key:"headerRef",ref:d,class:g(o(r).e("header"))},[T(a.$slots,"header",{},()=>[H("span",{role:"heading",class:g(o(r).e("title"))},ge(a.title),3)]),a.showClose?(I(),x("button",{key:0,"aria-label":o(t)("el.dialog.close"),class:g(o(r).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=h=>a.$emit("close"))},[R(o(we),{class:g(o(r).e("close"))},{default:M(()=>[(I(),q(he(a.closeIcon||o(n))))]),_:1},8,["class"])],10,Fe)):j("v-if",!0)],2),H("div",{id:o(i),class:g(o(r).e("body"))},[T(a.$slots,"default")],10,Qe),a.$slots.footer?(I(),x("footer",{key:0,class:g(o(r).e("footer"))},[T(a.$slots,"footer")],2)):j("v-if",!0)],6))}});var to=se(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const so=Z({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:G(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>De(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(e,s)=>{const n=Oe().emit,{nextZIndex:l}=Le();let d="";const i=ee(),r=ee(),c=A(!1),m=A(!1),p=A(!1),v=A(e.zIndex||l());let a,f;const h=Ie("namespace",Be),B=U(()=>{const E={},Y=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(E[`${Y}-margin-top`]=e.top),e.width&&(E[`${Y}-width`]=X(e.width))),E});function N(){n("opened")}function D(){n("closed"),n(ne,!1),e.destroyOnClose&&(p.value=!1)}function O(){n("close")}function L(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=oe(()=>k(),e.openDelay):k()}function w(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=oe(()=>u(),e.closeDelay):u()}function S(){function E(Y){Y||(m.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(E):w()}function b(){e.closeOnClickModal&&S()}function k(){!W||(c.value=!0)}function u(){c.value=!1}function y(){n("openAutoFocus")}function C(){n("closeAutoFocus")}e.lockScroll&&Ge(c);function $(){e.closeOnPressEscape&&S()}return K(()=>e.modelValue,E=>{E?(m.value=!1,L(),p.value=!0,v.value=e.zIndex?v.value++:l(),Ne(()=>{n("open"),s.value&&(s.value.scrollTop=0)})):c.value&&w()}),K(()=>e.fullscreen,E=>{!s.value||(E?(d=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,p.value=!0,L())}),{afterEnter:N,afterLeave:D,beforeLeave:O,handleClose:S,onModalClick:b,close:w,doClose:u,onOpenAutoFocus:y,onCloseAutoFocus:C,onCloseRequested:$,titleId:i,bodyId:r,closed:m,style:B,rendered:p,visible:c,zIndex:v}},ao=["aria-label","aria-labelledby","aria-describedby"],io={name:"ElDialog"},ro=J({...io,props:so,emits:no,setup(e,{expose:s}){const t=e,n=Re();$e({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},U(()=>!!n.title));const l=P("dialog"),d=A(),i=A(),r=A(),{visible:c,titleId:m,bodyId:p,style:v,rendered:a,zIndex:f,afterEnter:h,afterLeave:B,beforeLeave:N,handleClose:D,onModalClick:O,onOpenAutoFocus:L,onCloseAutoFocus:w,onCloseRequested:S}=lo(t,d);Ye(le,{dialogRef:d,headerRef:i,bodyId:p,ns:l,rendered:a,style:v});const b=ae(O),k=U(()=>t.draggable&&!t.fullscreen);return s({visible:c,dialogContentRef:r}),(u,y)=>(I(),q(Ve,{to:"body",disabled:!u.appendToBody},[R(We,{name:"dialog-fade",onAfterEnter:o(h),onAfterLeave:o(B),onBeforeLeave:o(N),persisted:""},{default:M(()=>[_e(R(o(Ze),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":o(f)},{default:M(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:o(m),"aria-describedby":o(p),class:g(`${o(l).namespace.value}-overlay-dialog`),onClick:y[0]||(y[0]=(...C)=>o(b).onClick&&o(b).onClick(...C)),onMousedown:y[1]||(y[1]=(...C)=>o(b).onMousedown&&o(b).onMousedown(...C)),onMouseup:y[2]||(y[2]=(...C)=>o(b).onMouseup&&o(b).onMouseup(...C))},[R(o(ze),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(w),onReleaseRequested:o(S)},{default:M(()=>[o(a)?(I(),q(to,{key:0,ref_key:"dialogContentRef",ref:r,"custom-class":u.customClass,center:u.center,"close-icon":u.closeIcon,draggable:o(k),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:o(D)},Ue({header:M(()=>[u.$slots.title?T(u.$slots,"title",{key:1}):T(u.$slots,"header",{key:0,close:o(D),titleId:o(m),titleClass:o(l).e("title")})]),default:M(()=>[T(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:M(()=>[T(u.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,ao)]),_:3},8,["mask","overlay-class","z-index"]),[[He,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var uo=se(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const po=xe(uo);export{Ze as E,Ge as a,ae as b,po as c,mo as s,Ke as u};
